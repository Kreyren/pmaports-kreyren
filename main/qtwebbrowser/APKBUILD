# Contributor: Pierre Parent < m #at* pierre-parent.fr >
pkgname=qtwebbrowser
pkgver=1.0
#commit corresponding to v1.0
commit=023733af5523a5ad84359926224fa106001215f4
pkgrel=0
pkgdesc="Qt web browser"
url="http://doc.qt.io/QtWebBrowser/"
arch="all"
license="GPLv3"
depends="qt5-qtbase qt5-qtwebengine qt5-qtvirtualkeyboard mesa-dev"
makedepends="qt5-qtbase-dev qt5-qtwebengine-dev busybox"
install=""
source="https://github.com/qtproject/qt-apps-qtwebbrowser/archive/$commit.tar.gz qtwebbrowser.post-install qtwebbrowser.svg startup-qtwebbrowser.sh qtwebbrowser.desktop 0001-Patch-for-usability-on-postmarketOS.patch"
builddir="$srcdir/qt-apps-qtwebbrowser-$commit/"

build() {
	cd "$builddir/src/"
	/usr/lib/qt5/bin/qmake src.pro
	make
}

package() {
	cd "$builddir/src/"
	mkdir -p $pkgdir/usr/bin/
	install -D -m644 qtwebbrowser \
        $pkgdir/usr/bin/qtwebbrowser-bin
	install -D -m644 "$srcdir"/startup-qtwebbrowser.sh \
		"$pkgdir"/usr/bin/qtwebbrowser
	install -D -m644 "$srcdir"/qtwebbrowser.svg \
		"$pkgdir"/usr/share/icons/hicolor/scalable/apps/qtwebbrowser.svg
	install -D -m644 "$srcdir"/qtwebbrowser.desktop \
		"$pkgdir"/usr/share/applications/qtwebbrowser.desktop
    chmod +x $pkgdir/usr/bin/qtwebbrowser
    chmod +x $pkgdir/usr/bin/qtwebbrowser-bin
}

install=qtwebbrowser.post-install

sha512sums="5e14de5c4c8aec79f3ab25947e1f4091fdbf9a38a894229d1f636dbbb17480970e3c9d7dfdf7cc57e42246a55058025ee3e200145115cfea507f0611aaa3dd77  qtwebbrowser.svg
a46aa1af96c730e37b7610c883225ae0530a563872dfe9422c339847804abe28c9a31eeb130c5e0bd4e0ff9f33efd339a00aa7a092567179cc0fa1908aed970a  qtwebbrowser.post-install
a0a09a8d7942ae7ce5f5bd3be96fb96448babf05191d46582366db1a1c2db97d724b5767f34959cabe18bbce36b64b2c2dfdefae4e23391d9cdddb83afb22ae5  startup-qtwebbrowser.sh
681a1275f7d09991cdffe9a0f86aa9af22103807d02fd24e806a46e79c8eacb4eea907ef1a677d5eacc379e0666934b346662c99e76026e3dc7820df162a9fe6  qtwebbrowser.desktop
6802f908973d29dc73f87df831cc4303dfc2eaf11a082341d1ff4618bbbcb712e858cab20bf67ed6cc2ef5eacfb44f80ec04d3765890b49ce510040d01986880  0001-Patch-for-usability-on-postmarketOS.patch
8f1ff6ef125fff2ae7794319e1ea6c6f1c068cf9aeb3b14516b9bc2326d6a69174970603effe7b35232b431eca24c3e11854c5363989d51e08ae4f597b425161  $commit.tar.gz"
