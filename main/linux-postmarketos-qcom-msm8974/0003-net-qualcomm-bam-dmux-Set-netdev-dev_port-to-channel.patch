From 27681f8d9c8ceb1c9f0e09c196d397f036f071c6 Mon Sep 17 00:00:00 2001
From: Minecrell <minecrell@minecrell.net>
Date: Sun, 25 Oct 2020 19:52:44 +0100
Subject: [PATCH 3/6] net: qualcomm: bam-dmux: Set netdev->dev_port to channel
 ID

This allows reading the channel ID from userspace.
---
 drivers/net/ethernet/qualcomm/bam-dmux.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/qualcomm/bam-dmux.c b/drivers/net/ethernet/qualcomm/bam-dmux.c
index 7bc02b20b643..171af41eb10a 100644
--- a/drivers/net/ethernet/qualcomm/bam-dmux.c
+++ b/drivers/net/ethernet/qualcomm/bam-dmux.c
@@ -496,6 +496,8 @@ static void bam_dmux_register_netdev_work(struct work_struct *work)
 			return; /* -ENOMEM */
 
 		SET_NETDEV_DEV(netdev, dmux->dev);
+		netdev->dev_port = ch;
+
 		bndev = netdev_priv(netdev);
 		bndev->dmux = dmux;
 		bndev->ch = ch;
-- 
2.30.1

