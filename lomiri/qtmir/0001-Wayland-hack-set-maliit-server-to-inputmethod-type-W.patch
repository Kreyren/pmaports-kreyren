From 6376713f75fb49336b6a6cad7211e118da3619f4 Mon Sep 17 00:00:00 2001
From: Marius Gripsgard <marius@ubports.com>
Date: Sun, 8 Sep 2019 19:54:55 +0200
Subject: [PATCH 1/4] Wayland hack, set maliit-server to inputmethod type (WIP)

---
 src/platforms/mirserver/wrappedwindowmanagementpolicy.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/src/platforms/mirserver/wrappedwindowmanagementpolicy.cpp b/src/platforms/mirserver/wrappedwindowmanagementpolicy.cpp
index c72c1bd2..15168191 100644
--- a/src/platforms/mirserver/wrappedwindowmanagementpolicy.cpp
+++ b/src/platforms/mirserver/wrappedwindowmanagementpolicy.cpp
@@ -139,6 +139,12 @@ namespace qtmir
             if (initialSize.isValid() && surfaceType == mir_window_type_normal) {
                 parameters.size() = toMirSize(initialSize);
             }
+
+            auto surfaceName = requestParameters.name().is_set() ? requestParameters.name().value() : "";
+
+            if (surfaceName == "maliit-server") {
+                parameters.type() = mir_window_type_inputmethod;
+            }
         }
 
         parameters.server_side_decorated() = false;
-- 
2.42.1

