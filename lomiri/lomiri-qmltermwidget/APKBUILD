# Maintainer: Brandon Boese <brandonboese@protonmail.com>
pkgname=lomiri-qmltermwidget
pkgver=0_git20221028
_commit="ffc6b2b2a20ca785f93300eca93c25c4b74ece17"
pkgrel=0
arch="all"
url="https://github.com/gber/qmltermwidget"
license="GPL-2.0-or-later"
pkgdesc="QML port of qtermwidget"
makedepends="
	qt5-qtbase-dev
	qt5-qtdeclarative-dev
	"
checkdepends="
	qt5-qtquickcontrols
	xvfb-run
	"
source="$pkgname-$_commit.tar.gz::https://github.com/gber/qmltermwidget/archive/$_commit/qmltermwidget-$_commit.tar.gz"
options="!check" # Requires itself to be installed
provides="qmltermwidget=$pkgver-r$pkgrel"
builddir="$srcdir/qmltermwidget-$_commit"

build() {
	qmake-qt5
	make
}

check() {
	xvfb-run /usr/lib/qt5/bin/qmlscene -l . test-app/test-app.qml
}

package() {
	INSTALL_ROOT="$pkgdir" make install -j1
}

sha512sums="
9e8a0ab4cf8f18982dfe482af1278f89445c55ed09bbf2d062cba3229d5c05433be4d734b13aee322900b19b68f23961cc1c34c60461c5931490511fe31f9ebd  lomiri-qmltermwidget-ffc6b2b2a20ca785f93300eca93c25c4b74ece17.tar.gz
"
