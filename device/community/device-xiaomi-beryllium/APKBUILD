# Maintainer: Venji10 <bennisteinir@gmail.com>
# Co-Maintainer: Joel Selvaraj <jo@jsfamily.in>

# Reference: <https://postmarketos.org/devicepkg>
_codename=xiaomi-beryllium
pkgname=device-xiaomi-beryllium
pkgdesc="Xiaomi Poco F1"
pkgver=5
pkgrel=0
url="https://postmarketos.org"
license="MIT"
arch="aarch64"
options="!check !archcheck"
depends="
	postmarketos-base
	mkbootimg
	soc-qcom-sdm845
	soc-qcom-sdm845-ucm
	postmarketos-update-kernel
"
makedepends="devicepkg-dev"
subpackages="
	$pkgname-nonfree-firmware:nonfree_firmware
"

source="
	deviceinfo.xiaomi-beryllium
"

build() {
	devicepkg_build $startdir $pkgname
}

package() {
	install -Dm644 "$srcdir/deviceinfo.$_codename" \
	"$pkgdir/etc/deviceinfo.$_codename"
}

nonfree_firmware() {
	pkgdesc="GPU, venus, modem firmware"
	depends="firmware-xiaomi-beryllium"
	mkdir "$subpkgdir"
}

sha512sums="
7884bb142d1853a456a3107a28e5c0c764afc8d3db273398d163b268e3473e8803fee4cc0e37587f2334e2bdc99ca5236af9072d6397be9cddd093233f7fdedd  deviceinfo.xiaomi-beryllium
"
