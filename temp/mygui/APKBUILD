pkgbase=mygui
pkgname="mygui"
pkgver=3.2.2
pkgrel=14
pkgdesc="A multilayer and overlappable GUI System"
arch="x86_64 aarch64"
url="http://mygui.info/"
license="LGPL"
depends="boost-libs ois freetype"
makedepends="boost-dev cmake oxygen graphviz ttf-dejavu doxygen freetype-dev"
source="https://github.com/MyGUI/mygui/archive/MyGUI${pkgver}.tar.gz"
subpackages="
	$pkgname-dev
	"

build() {
	cd $srcdir/mygui-MyGUI$pkgver

	# change CMake config so demos install to /opt
	sed -i "71 i set(MYGUI_GCC_VISIBILITY_FLAGS "")" CMakeLists.txt
	sed -i "s/\${OIS_LIBRARIES}/${OIS_LIBRARIES} boost_system/g" Common/CMakeLists.txt

	# get a clean build dir
	[[ -d build ]] && rm -rf build
	mkdir build && cd build

	# generate CMake Makefile
	cmake .. \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DMYGUI_INSTALL_SAMPLES=TRUE \
		-DMYGUI_INSTALL_TOOLS=TRUE \
		-DMYGUI_INSTALL_DOCS=TRUE \
		-DMYGUI_INSTALL_MEDIA=TRUE \
		-DFREETYPE_INCLUDE_DIR=/usr/include/freetype2/ \
		-DMYGUI_BUILD_DEMOS=FALSE \
		-DMYGUI_BUILD_TOOLS=FALSE \
		-DCMAKE_BUILD_TYPE=Release \
		-DMYGUI_RENDERSYSTEM=7 \
		-DBUILD_SHARED_LIBS=TRUE

	make
}

package() {
	cd $srcdir/mygui-MyGUI$pkgver/build

	make DESTDIR="$pkgdir" install
}

# vim:set ts=2 sw=2 et:jk:et
sha512sums="1290ce1d78b9e4bfe72bea3fb1bc6cdd25969b44be2844df62a1f425b3e221a68b61658fdf45271fb50a1957f12b5ada1c9be971e00ecfe41f53ae0a83ae18d4  MyGUI3.2.2.tar.gz"
