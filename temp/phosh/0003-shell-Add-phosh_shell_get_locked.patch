From 5aff816cbe8efbe5db4ab12a239b6ef7fdc892e0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>
Date: Sun, 12 Jul 2020 13:48:16 +0200
Subject: [PATCH 3/6] shell: Add phosh_shell_get_locked ()
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This makes it symmetric with `phosh_shell_set_locked ()`.

Signed-off-by: Guido GÃ¼nther <guido.gunther@puri.sm>
---
 src/shell.c | 16 ++++++++++++++++
 src/shell.h |  1 +
 2 files changed, 17 insertions(+)

diff --git a/src/shell.c b/src/shell.c
index f7ad1bd..d316b24 100644
--- a/src/shell.c
+++ b/src/shell.c
@@ -131,8 +131,24 @@ phosh_shell_unlock (PhoshShell *self)
   phosh_shell_set_locked (self, FALSE);
 }
 
+/**
+ * phosh_shell_get_locked:
+ * @self: The #PhoshShell singleton
+ *
+ * Returns: %TRUE if the shell is currently locked, otherwise %FALSE.
+ */
+gboolean
+phosh_shell_get_locked (PhoshShell *self)
+{
+  PhoshShellPrivate *priv = phosh_shell_get_instance_private (self);
+
+  return phosh_lockscreen_manager_get_locked (priv->lockscreen_manager);
+}
+
 /**
  * phosh_shell_set_locked:
+ * @self: The #PhoshShell singleton
+ * @state: %TRUE to lock the shell
  *
  * Lock the shell. We proxy to lockscreen-manager to avoid
  * that other parts of the shell need to care about this
diff --git a/src/shell.h b/src/shell.h
index fe387ca..3074a61 100644
--- a/src/shell.h
+++ b/src/shell.h
@@ -36,6 +36,7 @@ void                 phosh_shell_get_usable_area (PhoshShell *self,
                                                   gint *width,
                                                   gint *height);
 void                 phosh_shell_set_locked      (PhoshShell *self, gboolean locked);
+gboolean             phosh_shell_get_locked      (PhoshShell *self);
 void                 phosh_shell_lock            (PhoshShell *self);
 void                 phosh_shell_unlock          (PhoshShell *self);
 void                 phosh_shell_set_primary_monitor (PhoshShell *self, PhoshMonitor *monitor);
-- 
2.27.0

