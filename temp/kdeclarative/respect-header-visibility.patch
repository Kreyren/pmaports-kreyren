From 1270e357a96f1e78281c0335b1bd05e5c9c3e3c6 Mon Sep 17 00:00:00 2001
From: Marco Martin <notmart@gmail.com>
Date: Mon, 3 Feb 2020 19:32:09 +0100
Subject: respect header's visibility

---
 src/qmlcontrols/kcmcontrols/qml/SimpleKCM.qml | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/src/qmlcontrols/kcmcontrols/qml/SimpleKCM.qml b/src/qmlcontrols/kcmcontrols/qml/SimpleKCM.qml
index 97aa1cf..6cfb086 100644
--- a/src/qmlcontrols/kcmcontrols/qml/SimpleKCM.qml
+++ b/src/qmlcontrols/kcmcontrols/qml/SimpleKCM.qml
@@ -55,7 +55,7 @@ Kirigami.ScrollablePage {
 
     header: QtControls.Control {
         id: headerParent
-        visible: false
+        visible: contentItem ? contentItem.visible : false
         height: visible ? implicitHeight : 0
         leftPadding: 4
         topPadding: 4
@@ -65,7 +65,7 @@ Kirigami.ScrollablePage {
 
     footer: QtControls.Control {
         id: footerParent
-        visible: false
+        visible: contentItem ? contentItem.visible : false
         height: visible ? implicitHeight : 0
         leftPadding: 4
         topPadding: 4
@@ -79,7 +79,6 @@ Kirigami.ScrollablePage {
 
             footerParent.contentItem = f
             footer = footerParent
-            f.visible = true
             footer.visible = true
             f.parent = footerParent
         }
@@ -89,7 +88,6 @@ Kirigami.ScrollablePage {
 
             headerParent.contentItem = h
             header = headerParent
-            h.visible = true
             header.visible = true
             h.parent = headerParent
         }
-- 
cgit v1.1

